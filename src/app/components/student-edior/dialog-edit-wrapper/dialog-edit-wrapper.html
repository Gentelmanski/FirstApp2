<h1 mat-dialog-title>
  <mat-icon>{{ editingStudent.id ? 'edit' : 'person_add' }}</mat-icon>
  {{ editingStudent.id ? 'Редактировать студента' : 'Добавить студента' }}
</h1>

<div mat-dialog-content class="dialog-content">
  <mat-form-field appearance="outline" class="full-width-input">
    <mat-label>Имя</mat-label>
    <input matInput
           type="text"
           [(ngModel)]="editingStudent.name"
           required
           placeholder="Введите имя">
    <mat-icon matSuffix>person</mat-icon>
  </mat-form-field>

  <mat-form-field appearance="outline" class="full-width-input">
    <mat-label>Фамилия</mat-label>
    <input matInput
           type="text"
           [(ngModel)]="editingStudent.surname"
           required
           placeholder="Введите фамилию">
    <mat-icon matSuffix>person</mat-icon>
  </mat-form-field>

  <mat-form-field appearance="outline" class="full-width-input">
    <mat-label>Email</mat-label>
    <input matInput
           type="email"
           [(ngModel)]="editingStudent.email"
           required
           placeholder="Введите email">
    <mat-icon matSuffix>email</mat-icon>
  </mat-form-field>

  <!-- Выбор группы -->
  <mat-form-field appearance="outline" class="full-width-input" *ngIf="isAdmin">
    <mat-label>Группа</mat-label>
    <mat-select [(ngModel)]="editingStudent.group_id" name="group">
      <mat-option [value]="null">Без группы</mat-option>
      <mat-option *ngFor="let group of allGroups" [value]="group.id">
        {{group.name}} ({{group.code}})
      </mat-option>
    </mat-select>
    <mat-icon matSuffix>school</mat-icon>
  </mat-form-field>

  <!-- Отображение группы (только для просмотра, если не админ) -->
  <mat-form-field appearance="outline" class="full-width-input" *ngIf="!isAdmin && editingStudent.group">
    <mat-label>Группа</mat-label>
    <input matInput [value]="editingStudent.group?.name + ' (' + editingStudent.group?.code + ')'" readonly>
    <mat-icon matSuffix>school</mat-icon>
  </mat-form-field>
</div>

<div mat-dialog-actions align="end">
  <button mat-button
          (click)="onNoClick()"
          class="cancel-button">
    <mat-icon>cancel</mat-icon>
    Отмена
  </button>

  <button mat-button="filled"
          color="primary"
          [disabled]="!editingStudent.name || !editingStudent.surname || !editingStudent.email"
          [mat-dialog-close]="editingStudent"
          class="submit-button">
    <mat-icon>{{ editingStudent.id ? 'save' : 'add' }}</mat-icon>
    {{ editingStudent.id ? 'Сохранить' : 'Добавить' }}
  </button>
</div>